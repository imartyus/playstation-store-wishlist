<html>

<head>
	<title>PlayStation Store Wishlist</title>
	<link rel="stylesheet" href="styles.css">
	<meta charset="UTF-8">
</head>

<body x-data="getState()" x-init="init()">
	<section x-show="!onStoreUrl" class="info-block">
		Open this extension on a PlayStation Store product page to add it to the Wishlist
	</section>
	<section x-show="onStoreUrl">
		<button class="btn btn-add" 
			x-bind:disabled="loading || onStoreAlreadyAdded" 
			x-text="loading ? 'Adding!' : onStoreAlreadyAdded ? 'Already in Wishlist' : 'Add this game to Wishlist'" 
			@click="addGameFromTab">
		</button>
	</section>
	<section class="wl" x-show.transition="gameList.length">
		<div class="wl-head">My Wishlist:</div>
		<template x-for="item in gameList" :key="item">
			<div>
				<div class="wl-item" x-bind:class="{ 'sale': item.ogPrice }">
					<a x-bind:href="item.url" target="_blank" x-text="item.title"></a>
					&nbsp;&nbsp;<span x-text="item.price"></span>
					&nbsp;<span class="og-price" x-text="item.ogPrice"></span>
				</div>
				<button class="btn" @click="removeGame(item.url)">Remove</button>
			</div>
	</template>
	</section>
	<div class="last-updated" x-show.transition="lastUpdated">
		Last updated: <span x-text='lastUpdated'></span>
	</div>

	<script src="popup.js"></script>
</body>

</html>